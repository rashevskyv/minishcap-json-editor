Log started at 2025-05-17 21:19:34.934
==================================================
[2025-05-17 21:19:34.961] DEBUG: ================= Application Start =================
[2025-05-17 21:19:34.986] DEBUG: ++++++++++++++++++++ MainWindow: Initializing ++++++++++++++++++++
[2025-05-17 21:19:34.987] DEBUG: MainWindow: Initializing Core Components...
[2025-05-17 21:19:34.987] DEBUG: MainWindow: Loading game plugin...
[2025-05-17 21:19:34.987] DEBUG: --> MainWindow: load_game_plugin called.
[2025-05-17 21:19:34.987] DEBUG:     Using hardcoded plugin to load: 'zelda_mc' (settings not fully ready or 'active_game_plugin' not found)
[2025-05-17 21:19:34.988] DEBUG:     Importing module: plugins.zelda_mc.rules
[2025-05-17 21:19:34.989] DEBUG:     Successfully loaded and instantiated game rules: GameRules from plugins.zelda_mc.rules
[2025-05-17 21:19:34.989] DEBUG: <-- MainWindow: load_game_plugin finished.
[2025-05-17 21:19:34.989] DEBUG: MainWindow: Initializing Handlers (Pre-UI setup)...
2025-05-17 21:19:34,990 - DEBUG - logging_utils - log_debug - Handler 'ListSelectionHandler' initialized.
2025-05-17 21:19:34,990 - DEBUG - logging_utils - log_debug - Handler 'TextOperationHandler' initialized.
2025-05-17 21:19:34,991 - DEBUG - logging_utils - log_debug - Handler 'AppActionHandler' initialized.
2025-05-17 21:19:34,991 - DEBUG - logging_utils - log_debug - Handler 'SearchHandler' initialized.
[2025-05-17 21:19:34.991] DEBUG: MainWindow: Setting up UI...
[2025-05-17 21:19:34.992] DEBUG: setup_main_window_ui: Starting UI setup.
[2025-05-17 21:19:34.994] DEBUG: CustomListWidget INITIALIZED, parent: <__main__.MainWindow object at 0x000001DADAB6C160>
[2025-05-17 21:19:34.994] DEBUG: CustomListWidget: Item delegate set to <components.CustomListItemDelegate.CustomListItemDelegate object at 0x000001DADAB53670>
[2025-05-17 21:19:35.008] DEBUG: JsonTagHighlighter initialized.
[2025-05-17 21:19:35.009] DEBUG: JsonTagHighlighter: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.009] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FF8C00'
[2025-05-17 21:19:35.009] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.400] DEBUG: JsonTagHighlighter initialized.
[2025-05-17 21:19:35.400] DEBUG: JsonTagHighlighter: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.400] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FF8C00'
[2025-05-17 21:19:35.400] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.403] DEBUG: JsonTagHighlighter initialized.
[2025-05-17 21:19:35.403] DEBUG: JsonTagHighlighter: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.403] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FF8C00'
[2025-05-17 21:19:35.404] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.422] DEBUG: setup_main_window_ui: UI setup complete.
[2025-05-17 21:19:35.422] DEBUG: MainWindow: Initializing Handlers (Post-UI setup)...
[2025-05-17 21:19:35.423] DEBUG: MainWindow: Connecting Signals...
[2025-05-17 21:19:35.424] DEBUG: --> MainWindow: connect_signals() started
[2025-05-17 21:19:35.424] DEBUG: --> MainWindow: connect_signals() finished
[2025-05-17 21:19:35.424] DEBUG: MainWindow: Loading Editor Settings via SettingsManager...
[2025-05-17 21:19:35.424] DEBUG: --> SettingsManager: load_settings from settings.json
[2025-05-17 21:19:35.425] DEBUG: --> SettingsManager: load_font_map from font_map.json
[2025-05-17 21:19:35.425] DEBUG: Successfully loaded font_map. Count: 117
[2025-05-17 21:19:35.425] DEBUG: SettingsManager: Initial default_font_size (from QFont or 10): 8
[2025-05-17 21:19:35.426] DEBUG: SettingsManager: Applied all default values. self.mw.current_font_size is now 10 (from defaults)
[2025-05-17 21:19:35.427] DEBUG: SettingsManager: Successfully parsed settings.json. Content keys: ['default_tag_mappings', 'block_names', 'newline_display_symbol', 'newline_css', 'tag_css', 'show_multiple_spaces_as_dots', 'space_dot_color_hex', 'preview_wrap_lines', 'editors_wrap_lines', 'bracket_tag_color_hex', 'game_dialog_max_width_pixels', 'line_width_warning_threshold_pixels', 'search_history', 'last_selected_block_index', 'last_selected_string_index', 'last_cursor_position_in_edited', 'last_edited_text_edit_scroll_value_v', 'last_edited_text_edit_scroll_value_h', 'last_preview_text_edit_scroll_value_v', 'last_original_text_edit_scroll_value_v', 'last_original_text_edit_scroll_value_h', 'font_size', 'block_color_markers', 'original_file_path', 'edited_file_path', 'window_was_maximized', 'window_normal_geometry', 'main_splitter_state', 'right_splitter_state', 'bottom_right_splitter_state']
[2025-05-17 21:19:35.427] DEBUG: SettingsManager: Found 'font_size' in settings file: 11. Current self.mw.current_font_size: 10
[2025-05-17 21:19:35.427] DEBUG: SettingsManager: Set self.mw.current_font_size to 11 from file.
[2025-05-17 21:19:35.427] DEBUG: SettingsManager: Final MainWindow.LINE_WIDTH_WARNING_THRESHOLD_PIXELS = 208
[2025-05-17 21:19:35.427] DEBUG: SettingsManager: After potential load from file, self.mw.current_font_size is 11
[2025-05-17 21:19:35.427] DEBUG: MainWindow: Applying font. General: Family='Segoe UI', Editor: Family='Courier New', Size=11
[2025-05-17 21:19:35.435] DEBUG: UNDO_DEBUG (text_edited - User Input Start): Editor='edited_text_edit', UndoAvailable=False, RedoAvailable=False, Revision=2
[2025-05-17 21:19:35.449] DEBUG: Settings loaded. Last block: 14, string: -1
[2025-05-17 21:19:35.449] DEBUG: Settings loaded. Original path from mw: '//192.168.50.168/tloz_tmc_ua/UKR_orig.json', Edited path from mw: '//192.168.50.168/tloz_tmc_ua/UKR.json'
2025-05-17 21:19:35,450 - DEBUG - logging_utils - log_debug - Applying text wrap settings: Preview wrap: False, Editors wrap: False
2025-05-17 21:19:35,450 - DEBUG - logging_utils - log_debug - MainWindowHelper: Reconfiguring all highlighters...
[2025-05-17 21:19:35.450] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FFA500'
[2025-05-17 21:19:35.451] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.451] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FFA500'
[2025-05-17 21:19:35.451] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.451] DEBUG: JsonTagHighlighter reconfiguring styles: curly_tag_css='color: #808080; font-style: italic;', bracket_tag_color='#FFA500'
[2025-05-17 21:19:35.452] DEBUG: Reconfigure: Could not get editor widget or palette, using default black text color.
[2025-05-17 21:19:35.452] DEBUG: UNDO_DEBUG (text_edited - User Input Start): Editor='edited_text_edit', UndoAvailable=False, RedoAvailable=False, Revision=4
[2025-05-17 21:19:35.452] DEBUG: UNDO_DEBUG (text_edited - User Input Start): Editor='edited_text_edit', UndoAvailable=False, RedoAvailable=False, Revision=5
2025-05-17 21:19:35,452 - DEBUG - logging_utils - log_debug - MainWindowHelper: Highlighter reconfiguration attempt complete.
[2025-05-17 21:19:35.453] DEBUG: <-- SettingsManager: load_settings finished
[2025-05-17 21:19:35.453] DEBUG: MainWindow: After SettingsManager.load_settings(), self.mw.current_font_size = 11, general_family = Segoe UI, editor_family = Courier New
[2025-05-17 21:19:35.453] DEBUG: MainWindow: change_font_size_action called with size 11
[2025-05-17 21:19:35.453] DEBUG: MainWindow: After load_settings, self.LINE_WIDTH_WARNING_THRESHOLD_PIXELS = 208
[2025-05-17 21:19:35.453] DEBUG: MainWindow: After load_settings, self.initial_load_path = //192.168.50.168/tloz_tmc_ua/UKR_orig.json
[2025-05-17 21:19:35.454] DEBUG: MainWindow: After load_settings, self.initial_edited_load_path = //192.168.50.168/tloz_tmc_ua/UKR.json
[2025-05-17 21:19:35.454] DEBUG: MainWindow: Set preview_text_edit.LINE_WIDTH_WARNING_THRESHOLD_PIXELS to 208
[2025-05-17 21:19:35.454] DEBUG: MainWindow: Set original_text_edit.LINE_WIDTH_WARNING_THRESHOLD_PIXELS to 208
[2025-05-17 21:19:35.454] DEBUG: MainWindow: Set edited_text_edit.LINE_WIDTH_WARNING_THRESHOLD_PIXELS to 208
2025-05-17 21:19:35,454 - DEBUG - logging_utils - log_debug - MainWindowHelper: restore_state_after_settings_load called.
2025-05-17 21:19:35,455 - DEBUG - logging_utils - log_debug - Restored window geometry from settings: {'x': 157, 'y': 298, 'width': 2236, 'height': 943}
2025-05-17 21:19:35,469 - DEBUG - logging_utils - log_debug - MainWindowHelper: Attempting to load initial file from settings: //192.168.50.168/tloz_tmc_ua/UKR_orig.json
[2025-05-17 21:19:35.470] DEBUG: --> AppActionHandler: load_all_data_for_path START. Original: '//192.168.50.168/tloz_tmc_ua/UKR_orig.json', Manual Edit Path: '//192.168.50.168/tloz_tmc_ua/UKR.json', InitialLoad: True
[2025-05-17 21:19:35.471] DEBUG: load_json_file: Attempting to load '//192.168.50.168/tloz_tmc_ua/UKR_orig.json', expected_type: list
[2025-05-17 21:19:35.552] DEBUG: load_json_file: Successfully loaded '//192.168.50.168/tloz_tmc_ua/UKR_orig.json'.
[2025-05-17 21:19:35.570] DEBUG: load_json_file: Attempting to load '//192.168.50.168/tloz_tmc_ua/UKR.json', expected_type: list
[2025-05-17 21:19:35.619] DEBUG: load_json_file: Successfully loaded '//192.168.50.168/tloz_tmc_ua/UKR.json'.
[2025-05-17 21:19:35.620] DEBUG: UIUpdater: Cleared all problem block text. Highlights are managed by delegate.
[2025-05-17 21:19:35.949] DEBUG: <-- AppActionHandler: load_all_data_for_path FINISHED (Success)
2025-05-17 21:19:35,958 - DEBUG - logging_utils - log_debug - MainWindowHelper: last_selected_string_index (-1) is out of bounds for block 14. Skipping string/cursor restore.
2025-05-17 21:19:35,959 - DEBUG - logging_utils - log_debug - MainWindowHelper: Search history loaded into panel. Last query (if any) set in SearchHandler: Обири
2025-05-17 21:19:35,959 - DEBUG - logging_utils - log_debug - Rebuilt unsaved_block_indices: set()
[2025-05-17 21:19:35.959] DEBUG: ++++++++++++++++++++ MainWindow: Initialization Complete ++++++++++++++++++++
[2025-05-17 21:19:36.120] DEBUG: Starting Qt event loop...
[2025-05-17 21:19:38.888] DEBUG: <<<<<<<<<< ACTION: Rescan Issues for Block 14 Triggered. use_default_mappings=True >>>>>>>>>>
[2025-05-17 21:19:38.889] DEBUG: DSP.update_edited_data: Key (14, 10) updated. New edited_data size: 1
[2025-05-17 21:19:38.889] DEBUG: DSP.update_edited_data: Unsaved changes status changed to True
[2025-05-17 21:19:38.891] DEBUG: DSP.update_edited_data: Key (14, 23) updated. New edited_data size: 2
[2025-05-17 21:19:41.838] DEBUG: <<<<<<<<<< ACTION: Rescan Issues for Block 15 Triggered. use_default_mappings=True >>>>>>>>>>
[2025-05-17 21:19:41.838] DEBUG: DSP.update_edited_data: Key (15, 3) updated. New edited_data size: 3
[2025-05-17 21:19:48.764] DEBUG: <<<<<<<<<< ACTION: Rescan All Issues Triggered >>>>>>>>>>
[2025-05-17 21:19:48.764] DEBUG: UIUpdater: Cleared all problem block text. Highlights are managed by delegate.
[2025-05-17 21:27:20.277] DEBUG: --> MainWindow: closeEvent received.
2025-05-17 21:27:20,277 - DEBUG - logging_utils - log_debug - MainWindowHelper: prepare_to_close called.
2025-05-17 21:27:20,278 - DEBUG - logging_utils - log_debug - MainWindowHelper: Updated search_history_to_save: 20 items
[2025-05-17 21:27:20.278] DEBUG: --> AppActionHandler: handle_close_event called.
[2025-05-17 21:27:21.679] DEBUG: <-- AppActionHandler: handle_close_event finished.
[2025-05-17 21:27:21.679] DEBUG: Close accepted (unsaved changes were handled). Settings should have been saved by AppActionHandler or by user choice during handle_close_event.
[2025-05-17 21:27:21.679] DEBUG: <-- MainWindow: closeEvent finished.
[2025-05-17 21:27:21.696] DEBUG: Qt event loop finished with exit code: 0
[2025-05-17 21:27:21.696] DEBUG: ================= Application End =================
